:root {
  --bg-start:#4f46e5; /* indigo-600 */
  --bg-end:#9333ea;   /* purple-600 */
  --card:#f8fafc;     /* slate-50 */
  --text:#0f172a;     /* slate-900 */
  --muted:#64748b;    /* slate-500 */
  --primary:#7c3aed;  /* violet-600 */
  --primary-contrast:#fff;
}

*{ box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans SC', 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif; margin:0; color:var(--text); background: linear-gradient(180deg, var(--bg-start), var(--bg-end)) fixed; }

.app-bar { position: sticky; top:0; z-index: 20; display:flex; align-items:center; justify-content: space-between; padding: 14px 16px; color:#fff; background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.1)); backdrop-filter: blur(6px); }
.app-bar .title{ font-weight: 700; }

main { max-width: 720px; margin: 0 auto; padding: 16px 16px 88px; }

.hero-card {
  background:rgba(255,255,255,.85);
  color: var(--text);
  border-radius: 18px;
  padding: 28px 18px;             /* 增加内边距，显得不拥挤 */
  min-height: 120px;              /* 提升整体高度 */
  box-shadow: 0 12px 40px rgba(0,0,0,.12);
  margin: 10px 6px 16px;
  text-align:center;
  display:flex;                   /* 使用 Flex 完全居中 */
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.hero-card h2{ margin:0 0 8px; }
.hero-card p{ margin:0; color: var(--muted); }

.card { background: var(--card); color: var(--text); border-radius: 18px; padding: 14px; margin: 14px 6px; box-shadow: 0 14px 28px rgba(0,0,0,.12), 0 8px 12px rgba(0,0,0,.06); overflow: hidden; transform: translateZ(0); transition: box-shadow .25s ease, transform .25s ease; }
.card:hover{ transform: translateY(-4px); box-shadow: 0 18px 36px rgba(0,0,0,.16), 0 12px 20px rgba(0,0,0,.08); }
.card:active{ transform: translateY(-1px); box-shadow: 0 16px 32px rgba(0,0,0,.14), 0 10px 16px rgba(0,0,0,.08); }
.card-title { font-weight: 700; margin-bottom: 10px; }
.with-icon .icon { margin-right: 6px; }
.kv .k{ color: var(--muted); display:inline-block; min-width: 84px; line-height: 1.6; }
.kv .v{ font-weight: 600; line-height: 1.6; }
.kv > div{ padding: 12px 2px; }
.card-actions{ margin-top: 10px; display:flex; gap:10px; flex-wrap: wrap; padding-bottom: 8px; }
.card-actions.row .btn{ flex:1; }

.btn{ background: var(--primary); color: var(--primary-contrast); border:0; border-radius: 999px; padding: 10px 16px; cursor: pointer; }
.btn.primary{ background:#22c55e; }
.btn.ghost{ background: #eef2ff; color:#3730a3; }
.btn:disabled{ opacity:.6; cursor:not-allowed }

.list{ display:flex; flex-direction: column; gap: 10px; }
.list-item{ background:#ffffff; border-radius: 16px; padding: 12px; display:flex; align-items:center; justify-content: space-between; box-shadow: inset 0 0 0 1px rgba(0,0,0,.04); }
.li-title{ font-weight: 700; }
.li-sub{ color: var(--muted); font-size: 12px; margin-top:4px; }
.li-actions{ display:flex; gap:8px; }

.tabbar{ position: fixed; left:0; right:0; bottom:0; height:64px; background:#fff; display:flex; align-items:center; justify-content: space-around; box-shadow: 0 -8px 24px rgba(0,0,0,.12); z-index: 20; }
.tab{ background:transparent; border:0; color:#475569; font-weight:600; }
.tab.active{ color:#111827; }
.fab{ width:56px; height:56px; border-radius:50%; background: var(--primary); color:#fff; border:0; box-shadow: 0 8px 22px rgba(124,58,237,.5); transform: translateY(-12px); font-size: 20px; }

.fab-menu{ position: fixed; left:50%; transform: translateX(-50%); bottom:80px; display:none; flex-direction: column; gap:10px; z-index:25; }
.fab-menu.show{ display:flex; }
.fab-item, .fab-close{ background: var(--primary); color:#fff; border:0; border-radius: 999px; padding: 10px 16px; }
.fab-close{ background:#4338ca; }

.page{ display:none; }
.page.active{ display:block; }

.app-footer{ text-align:center; color:#eaeaff; opacity:.8; padding: 10px 0 84px; }

.log{ background: rgba(0,0,0,.35); color:#fff; max-width:720px; margin: 8px auto; padding: 8px 12px; border-radius: 8px; white-space: pre-wrap; }

/* 个人信息卡片定制样式 */
.card.profile{ padding:0; overflow:hidden; border-radius:22px; }
.card.profile .card-title{
  display:flex; align-items:center; justify-content:center; gap:8px;
  margin:0; padding:16px 12px;
  font-size: 20px;                 /* 标题加大一号 */
  text-align:center; font-weight:800;
  background: linear-gradient(180deg, rgba(124,58,237,.15), rgba(124,58,237,.04)); /* 表头加深 */
  border-bottom: 1px solid rgba(15,23,42,.08);
}
.card.profile .with-icon .icon{ margin-right:0; }
.card.profile .kv{ padding: 12px 14px; }
.card.profile .kv > div{ display:flex; align-items:center; justify-content:space-between; padding:14px 2px; border-bottom: 1px solid rgba(15,23,42,.08); }
.card.profile .kv > div:last-child{ border-bottom:0; }
.card.profile .kv .k{ min-width:auto; }
.card.profile .kv .v{ font-weight: 400; } /* 内容不加粗 */

/* 个人信息卡片底部操作按钮区域内边距，防止按钮与圆角重叠溢出 */
.card.profile .card-actions{ padding: 10px 14px 14px; }
.card.profile .card-actions .btn{ flex:1 1 calc(33.333% - 10px); min-width: 0; }

/* 数值胶囊高亮：积分（橙色）、捐赠（绿色） */
.card.profile #kv-points{
  display:inline-flex; align-items:center; gap:6px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(251, 146, 60, .12);     /* orange-400 */
  color: #d97706;                           /* amber-600 */
  border: 1px solid rgba(234, 88, 12, .25); /* orange-600 */
}
.card.profile #kv-donation{
  display:inline-flex; align-items:center; gap:6px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(34, 197, 94, .12);       /* green-500 */
  color: #16a34a;                           /* green-600 */
  border: 1px solid rgba(22, 163, 74, .25); /* green-600 */
}

/* 通用徽章样式 */
.badge{ display:inline-flex; align-items:center; padding: 3px 10px; border-radius: 999px; font-weight:600; font-size: 13px; border:1px solid transparent; }
.badge-green{ background: rgba(34,197,94,.10); color:#16a34a; border-color: rgba(22,163,74,.25); }
.badge-red{ background: rgba(248,113,113,.12); color:#dc2626; border-color: rgba(239,68,68,.25); }

/* Emby 账户卡片定制 */
.card.emby{ padding:0; overflow:hidden; border-radius:22px; }
.card.emby .card-title{ display:flex; align-items:center; justify-content:center; gap:8px; margin:0; padding:16px 12px; font-size:20px; font-weight:800; background: linear-gradient(180deg, rgba(37,99,235,.12), rgba(37,99,235,.04)); border-bottom:1px solid rgba(15,23,42,.08); }
.card.emby .with-icon .icon{ margin-right:0; }
.card.emby .with-icon .icon-svg{ width:20px; height:20px; margin-right:6px; display:inline-block; vertical-align:middle; }
.card.emby .kv{ padding: 12px 14px; }
.card.emby .kv > div{ display:flex; align-items:center; gap:8px; justify-content:flex-start; padding:14px 2px; border-bottom: 1px solid rgba(15,23,42,.08); }
.card.emby .kv > div:last-child{ border-bottom:0; }
.card.emby .row-icon{ width:20px; text-align:center; opacity:.85; }
.card.emby .k{ min-width: 92px; color: var(--muted); }
.card.emby .v{ font-weight:600; margin-left:auto; text-align:right; }
.card.emby .card-actions{ padding: 10px 14px 14px; }

/* 绑定线路徽章可点击选择 */
#emby-bound{ cursor:pointer; user-select:none; box-shadow: inset 0 0 0 1px rgba(59,130,246,.2); }
#emby-bound:hover{ box-shadow: inset 0 0 0 1px rgba(59,130,246,.4); }
#emby-bound::after{ content:"\25BE"; /* ▼ */ margin-left:6px; font-size: 12px; opacity:.7; }

/* 简易弹层 */
.modal{ position: fixed; inset:0; display:none; align-items:center; justify-content:center; z-index: 60; }
.modal.show{ display:flex; }
.modal-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.35); backdrop-filter: blur(2px); }
.modal-panel{ position:relative; background:#fff; color:#111; border-radius:16px; width:min(92vw, 640px); max-height:80vh; overflow:auto; box-shadow: 0 20px 60px rgba(0,0,0,.25); padding: 14px; }
.modal-title{ font-weight:800; font-size:18px; margin: 4px 4px 12px; }
.modal-actions{ display:flex; justify-content:flex-end; gap:10px; padding-top: 10px; }

/* 线路列表 */
.route-list{ display:flex; flex-direction: column; gap:10px; }
.route-item{ border:1px solid rgba(0,0,0,.06); border-radius:12px; padding: 10px 12px; cursor:pointer; box-shadow: 0 1px 0 rgba(0,0,0,.03); }
.route-item:hover{ background:#f8fafc; }
.route-host{ font-weight:700; margin-bottom:6px; }
.route-tags{ display:flex; gap:6px; flex-wrap: wrap; }
.tag{ font-size:12px; padding:2px 8px; border-radius:999px; background:#e5e7eb; color:#374151; }
.tag.green{ background: rgba(34,197,94,.15); color:#15803d; }
.tag.purple{ background: rgba(168,85,247,.18); color:#6d28d9; }
.tag.blue{ background: rgba(59,130,246,.18); color:#1d4ed8; }
.tag.red{ background: rgba(248,113,113,.18); color:#dc2626; }

/* 选中态高亮（蓝色描边） */
.route-item.selected{ box-shadow: 0 0 0 2px rgba(59,130,246,.9) inset, 0 1px 0 rgba(0,0,0,.05); }
.badge-blue{ background: rgba(59,130,246,.10); color:#1d4ed8; border-color: rgba(59,130,246,.35); }

/* 交流讨论卡片标题：居中且与 Emby 卡片字号一致 */
.card.discuss .card-title{ display:flex; align-items:center; justify-content:center; gap:8px; margin:0; padding:16px 12px; font-size:20px; font-weight:800; }

/* 轻量 Toast */
#toast{ position: fixed; left:50%; bottom: 12%; transform: translateX(-50%); background: rgba(17,24,39,.92); color:#fff; padding:10px 14px; border-radius:10px; opacity:0; pointer-events:none; transition: opacity .2s ease; z-index:99; font-size:14px; }
#toast.show{ opacity:1; }

/* 讨论列表美化 */
.discuss-list{ gap: 12px; }
.discuss-item{ background:#fff; border-radius:16px; padding:12px 12px; display:flex; align-items:center; justify-content:space-between; box-shadow: inset 0 0 0 1px rgba(0,0,0,.05); }
.discuss-item .li-left{ display:flex; align-items:center; gap:12px; }
.discuss-item .li-icon{ width:40px; height:40px; border-radius:12px; display:flex; align-items:center; justify-content:center; box-shadow: 0 6px 16px rgba(17,24,39,.08), inset 0 0 0 1px rgba(0,0,0,.06); }
.discuss-item .li-icon.green{ background: linear-gradient(180deg, #34d399, #10b981); }
.discuss-item .li-icon.orange{ background: linear-gradient(180deg, #f59e0b, #f97316); }
.discuss-item .li-text .li-title{ font-weight:800; }
.discuss-item .li-text .li-sub{ color:#6b7280; }
.discuss-item .icon-actions{ display:flex; align-items:center; gap:8px; }
.icon-btn{ width:40px; height:40px; border-radius:12px; background:#eef2ff; display:inline-flex; align-items:center; justify-content:center; box-shadow: 0 8px 18px rgba(59,130,246,.18), inset 0 0 0 1px rgba(59,130,246,.15); }
.icon-btn.enter{ background:#e0ecff; }
.icon-btn.copy{ background:#eef2ff; }
.icon-btn svg{ display:block; }

/* 表单样式（弹层内） */
.modal .form{ display:flex; flex-direction: column; gap:12px; padding: 6px 2px; }
.modal .form-row{ display:flex; flex-direction: column; gap:6px; }
.modal .form-row label{ font-size: 13px; color:#64748b; }
.modal .form-row input{ width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(15,23,42,.12); outline:none; }
.modal .form-row input:focus{ border-color:#6366f1; box-shadow: 0 0 0 3px rgba(99,102,241,.15); }
.modal .form-error{ color:#dc2626; font-size:13px; }
